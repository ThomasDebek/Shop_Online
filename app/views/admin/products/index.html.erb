<h1>Produkty</h1>

<%= link_to new_admin_product_path, class: "btn btn-success" do %>
    <span class="fa fa-plus"></span> Dodaj nowy produkt               <!-- standardowy link prowadzacy do nowego produktu -->
<% end %>


<div class="search-form">
  <%= search_form_for [:admin, @q] do |f| %>                                                           <!-- Robimy search_form_for, pniewaz checmy zeby formularz wyszukiwania kierowal do panelu admina i podajemy w parametrach symbol admin i nasza zmienna q  -->
      <%= f.text_field :name_or_description_or_long_description_cont, placeholder: "Szukaj tekstu" %>  <!-- I nasz formularz wyszukiwania bedzie zaweiral dawa pola,
                                                                                                            i 1-sze nasze pole ma smieszna nazwe i ransack ja skanuje
                                                                                                             i prubuje odkryc jaka kwerende mielismy na mysli
                                                                                                            Czyli wpisanie jakiegos slowa sprawi ze Ransack bedzie szukal w kolumnach
                                                                                                             description oraz long_description tego slowa i jezeli ktores z tych pol zawiera
                                                                                                             to slowo ktore podamy w trybie wyszukiwania to produkt zostanie odnaleziony i
                                                                                                             zostanie wyswietlony na liscie
                                                                                                             -->
      <%= f.text_field :price_gt, placeholder: "Cena >" %>              <!-- Naszym drugim polem jest price_qt i wszystkie produkty ktorych cena jest wieksza od
                                                                         od wartosci ktora jest podana w tym polu, zostana znalezione i wyswietlone w liscie wyszukiwania -->
      <%= f.submit "Szukaj" %>
  <% end %>
</div>


<table class="table table-striped">       <!-- Tabelka z lista produktow -->
  <thead>
  <tr>
    <th><%= sort_link(@q, :name, "Nazwa") %></th>    <!-- Posortujmy nasze produkty za pomoca helpera Ranstacka sort_link,
                                                          pierwszym argumentem jest nasza zmienna q, a drugim argumentem jest nazwa pola
                                                           po ktorym bedziemy sortowac(w tym przypadku jest to name)
                                                           i trzecim argumenem ma byc tekst ktory jest w linku czyli nazwa-->
    <th><%= sort_link(@q, :price, "Cena") %></th>    <!-- W tym przypadku podobnie -->
    <th>Kategoria</th>
    <th></th>
  </tr>
  </thead>
  <tbody>
  <% @products.each do |product| %>
      <tr>
        <td><%= product.name %></td>                       <!-- Oczywiscie nazwe -->
        <td><%= number_to_currency product.price %></td>   <!-- Cene -->
        <td><%= product.category.name %></td>              <!-- Nazwe kategorii -->
        <td>
          <%= link_to "Edycja", edit_admin_product_path(product), class: "btn btn-default btn-xs" %>     <!-- link do edycji produktu -->
        </td>
      </tr>
  <% end %>
  </tbody>
</table>

<%= paginate @products %>     <!-- Oczywiscie paginacje produktu -->
