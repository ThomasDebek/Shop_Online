<!DOCTYPE html>
<html>
<head>
  <title>ShopOnline</title>
  <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' => true %>
  <%= javascript_include_tag 'application', 'data-turbolinks-track' => true %>
  <%= csrf_meta_tags %>
</head>
<body>
    <nav class="navbar navbar-inverse navbar-static-top">
      <div class="container">
        <div class="navbar-header">
          <a class="navbar-brand" href="<%= root_path %>">Shop-Online</a>
        </div>
        <ul class="nav navbar-nav">
          <li <% if [params[:controller], params[:action]] == ["products", "index"] %>class="active"<% end %>><%= link_to "Start", root_path %></li>
          <li <% if [params[:controller], params[:action]] == ["static", "privacy"] %>class="active"<% end %>><%= link_to "Polityka prywatności", privacy_path %></li>
          <li <% if [params[:controller], params[:action]] == ["static", "terms"] %>class="active"<% end %>><%= link_to "Regulamin", terms_path %></li>
          <li <% if [params[:controller], params[:action]] == ["static", "shipping"] %>class="active"<% end %>><%= link_to "Regulamin", shipping_path %></li>
          <li <% if [params[:controller], params[:action]] == ["static", "about"] %>class="active"<% end %>><%= link_to "O sklepie", about_path %></li>
        </ul>
        <!-- Czyli tworze sobie tablice, w ktorej pierwsza z nich to nazwa kontrollera a druga nazwa akcji -->
        <!-- I porównuje ja do aktulanego kontrolera w ktorym sie znajduje i akcji jakiej jestem -->
        <!-- Jezeli jest taki sam to podswietlam akcjie -->

        <!-- Koszyk  -->
        <ul class="nav navbar-nav navbar-right">                                                 <!-- Nadajmy odpowiednia klase -->
          <li>
            <%= link_to cart_path do %>                                                          <!-- Zalinkójmy nasz koszyk, jeszcze nie dziala -->
                <span class="fa fa-shopping-cart"></span>                                        <!-- Ladna ikone dajmy od font awsome -->
                <%= current_cart.line_items.map { |e| e.quantity }.sum %>                        <!-- Wyswietlimy liczbe wszystkich produktow -->
                produktów za
                <%= number_to_currency(current_cart.line_items.map { |e| e.full_price }.sum) %>  <!-- Wyswietlimy cene wszytkich produkotw -->
            <% end %>
          </li>
        </ul>
      </div>
    </nav>

    <!-- Nasz sidebar - pasek boczny -->
    <div class="container-fluid">
      <div class="row">
        <div class="col-md-2">
          <h3>Kategorie</h3>
          <ul class="nav nav-sidebar">
            <% Category.all.each do |category| %>                        <!-- Wyswitlmy teraz prawdziwe kategorie -->
                <li <% if @category == category %>class="active"<% end %>>   <!-- dodamy klase active, ktora podswietla nam nazwe, czyli jezeli dana kategoria jest aktywna to podswietlamy tylko ta kategorie -->
                  <%= link_to category.name, category_path(category) %>  <!-- 1-argumenty to category, a 2gim argumentem bedzie sciezka do category -->
                </li>
            <% end %>
          </ul>
        </div>
        <div class="col-md-8">
          <%= yield %>
        </div>
      </div>
    </div>

</body>
</html>
